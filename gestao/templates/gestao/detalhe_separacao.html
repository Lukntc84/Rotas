{% extends 'painel/base.html' %}

{% block content %}
  <style>
    /* Container interno cinza para os dados - Estilo Identidade Log√≠stica */
    .info-box-logistica {
      background-color: #f8fafd; /* Tom de azul/cinza muito claro das suas fotos */
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 15px;
    }
    
    .card-logistica {
      border: none;
      border-radius: 20px;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
      background: white;
      transition: transform 0.2s;
    }
    
    .label-logistica {
      color: #a0aec0;
      font-size: 0.85rem;
      font-weight: 500;
    }
    
    .value-logistica {
      color: #2d3748;
      font-weight: 700;
      text-align: right;
    }
    
    /* Ajuste de Grid para Desktop (Cards lado a lado) */
    @media (min-width: 768px) {
      .grid-itens {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
        gap: 20px;
      }
    }
  </style>

  <div class="container mt-4 pb-5">
    <a href="{% url 'gestao:monitor_paletes' %}" class="btn btn-white border shadow-sm mb-4" style="border-radius: 10px;">‚Üê Voltar aos Paletes</a>

    <div class="mb-4">
      <h2 class="h4 fw-bold">üì¶ Itens no Palete: <span class="text-primary">{{ loja.nome }}</span></h2>
      <span class="badge bg-info text-dark rounded-pill px-3">{{ notas.count }} Nota(s) Encontrada(s)</span>
    </div>

    <div class="grid-itens">
      {% for nota in notas %}
        <div class="card card-logistica p-3">
          <div class="text-center mb-3">
            <h5 class="fw-bold mb-0" style="color: #2d3748;">Transfer√™ncia #{{ nota.numero_transferencia }}</h5>
          </div>

          <div class="info-box-logistica mb-3">
            <div class="d-flex justify-content-between mb-2">
              <span class="label-logistica">Marca:</span>
              <span class="value-logistica">{{ nota.marca|default:'-' }}</span>
            </div>
            <div class="d-flex justify-content-between mb-2">
              <span class="label-logistica">Quantidade:</span>
              <span class="value-logistica">{{ nota.quantidade }} unidades</span>
            </div>
            <div class="d-flex justify-content-between mb-2">
              <span class="label-logistica">Data/Hora:</span>
              <span class="value-logistica" style="font-size: 0.85rem;">{{ nota.criado_em|date:'d/m/Y H:i' }}</span>
            </div>
            <div class="d-flex justify-content-between align-items-center">
              <span class="label-logistica">Status:</span>
              <span class="badge rounded-pill bg-light text-info border-info border px-3">{{ nota.get_status_display }}</span>
            </div>
          </div>

          <div class="px-1">
            <form method="POST" class="m-0">
              {% csrf_token %}
              <input type="hidden" name="transferencia_id" value="{{ nota.id }}" />
              <button type="submit" class="btn btn-success w-100 fw-bold shadow-sm rounded-pill py-2 text-uppercase" style="font-size: 0.85rem; letter-spacing: 0.5px;"><i class="bi bi-check2-circle me-1"></i> Confirmar Recebimento</button>
            </form>
          </div>
        </div>
      {% empty %}
        <div class="col-12 text-center py-5">
          <p class="text-muted">Nenhum item pendente neste palete.</p>
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}
